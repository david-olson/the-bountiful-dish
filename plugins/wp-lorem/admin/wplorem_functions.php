<?phpdefined( 'ABSPATH' ) or die( 'No script kiddies please!' );function wp_lorem_nn_getPostType(){    $post_types['exclude'] = array('attachment' => 'attachment');    $args['post_type']['builtin'] = array(       'public'   => true,       '_builtin' => true    );    $args['post_type']['extend'] = array(       'public'   => true,       '_builtin' => false    );    $post_types['builtin'] = get_post_types( $args['post_type']['builtin'] );    $post_types['extend']  = get_post_types( $args['post_type']['extend'] );    return $post_types['all']     = array_diff( array_merge( $post_types['builtin'] , $post_types['extend'] ) , $post_types['exclude'] );}function wp_lorem_nn_printPostTypeSelector(){    $post_types = wp_lorem_nn_getPostType();    $output     = '';    if( !empty( $post_types ) ){        foreach( $post_types as $post_type ){            $output .= '<fieldset><input type="checkbox" name="wp-lorem_postType_' . $post_type . '" id="wp-lorem_postType_' . $post_type . '" class="css-checkbox" value="1" data-type="chosen">';            $output .= '<label for="wp-lorem_postType_' . $post_type . '" class="css-label">' . $post_type . '</label></fieldset>';        }    }    echo $output;}function wp_lorem_nn_printSettingsSelector(){    $output = '';    $output .= '<fieldset><input type="checkbox" name="wp-lorem_settings_content" id="lorem_settings_content" class="css-checkbox" value="1" data-type="chosen">';    $output .= '<label for="lorem_settings_content" class="css-label">' . __('Insert Content' , 'wp-lorem') . '</label></fieldset>';    $output .= '<fieldset><input type="checkbox" name="wp-lorem_settings_thumbnail" id="lorem_settings_thumbnail" class="css-checkbox" value="1" data-type="chosen">';    $output .= '<label for="lorem_settings_thumbnail" class="css-label">' . __('Insert Thumbnail' , 'wp-lorem') . '</label></fieldset>';    $output .= '<fieldset><input type="number" name="wp-lorem_settings_number" id="lorem_settings_number" placeholder="10">';    $output .= '<label for="lorem_settings_number" class="label">' . __('Posts to create' , 'wp-lorem') . '</label></fieldset>';    echo $output;}function wp_lorem_nn_printLanguagesSettings(){        $lang = wpl_get_core_lang();    $output = '';    $output .= '<fieldset>';    $output .= '<label for="wp_lorem_nn_choose_lang"><strong>' . __('Choose Your Language' , 'wp-lorem') . '</strong></label> ';    $output .= '<select name="wp_lorem_nn_choose_lang" id="wp_lorem_nn_choose_lang">';    $output .= '<option value="en" '.selected( 'en' , $lang , false).'>' . __('English' , 'wp-lorem') . '</option>';    $output .= '<option value="ru" '.selected( 'ru' , $lang , false ).'>' . __('Russian' , 'wp-lorem') . '</option>';    $output .= '<option value="he" '.selected( 'he' , $lang , false ).'>' . __('Hebrew' , 'wp-lorem') . '</option>';    $output .= '</select>';    $output .= '</fieldset>';    echo $output;}function wp_lorem_nn_insertNewPosts( $post_types , $settings , $amount = 10 ){    if( is_array( $post_types ) && is_array( $settings ) ){        foreach( $post_types as $post_type ){            for( $i = 1 ; $i <= $amount ; $i ++ ){                $post_id = NULL;                // Create post object                $tmpPost = array(                  'post_title'    => wp_strip_all_tags( wp_lorem_nn_get_insert_title() . ' ' . $i ),                  'post_content'  => isset( $settings['content'] ) ? wp_lorem_nn_get_insert_content() : '',                  'post_status'   => 'lorem_post',                  'post_type'     => $post_type,                  'post_author'   => 1                );                // Insert the post into the database                if( $post_id = wp_insert_post( $tmpPost ) ){                    if( isset( $settings['thumbnail'] ) )                        wp_lorem_nn_insertThumbnail( $post_id , wplorem_nn_getImageFromAPI() );                }            }        }    }}// Add Featured Image to Postfunction wp_lorem_nn_insertThumbnail( $post_id , $image_url ){    // Check if is valid image url    if ( getimagesize( $image_url ) !== false ) {        $upload_dir = wp_upload_dir(); // Set upload folder        $image_data = file_get_contents($image_url); // Get image data        $filename   = basename($image_url); // Create image file name        // Check folder permission and define file location        if( wp_mkdir_p( $upload_dir['path'] ) ) {            $file = $upload_dir['path'] . '/' . $filename;        } else {            $file = $upload_dir['basedir'] . '/' . $filename;        }        // Create the image  file on the server        file_put_contents( $file, $image_data );        // Check image file type        $wp_filetype = wp_check_filetype( $filename, null );        // Set attachment data        $attachment = array(            'post_mime_type' => $wp_filetype['type'],            'post_title'     => sanitize_file_name( $filename ),            'post_content'   => '',            'post_status'    => 'inherit'        );        // Create the attachment        $attach_id = wp_insert_attachment( $attachment, $file, $post_id );        // Include image.php        require_once(ABSPATH . 'wp-admin/includes/image.php');        // Define attachment metadata        $attach_data = wp_generate_attachment_metadata( $attach_id, $file );        // Assign metadata to attachment        wp_update_attachment_metadata( $attach_id, $attach_data );        // And finally assign featured image to post        set_post_thumbnail( $post_id, $attach_id );    }}function wplorem_nn_getImageFromAPI(){    $accessToken = '563492ad6f917000010000017256c6039ef84bc96d07569bac932769';    $apiUrl      = 'http://api.pexels.com/v1/popular?per_page=25&page=5';    $curl        = curl_init($apiUrl);    curl_setopt($curl, CURLOPT_HTTPHEADER, array('Authorization:'.$accessToken));    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);    $json  = curl_exec($curl);    $array = json_decode( $json );    $array = isset( $array->photos ) ? $array->photos : false;    $array = $array[ rand( 1 , count( $array ) ) ];    if( !empty( $array ) && is_object( $array ) ){        $thumbnail = isset( $array->src->large ) ? $array->src->large : '';        if( getimagesize( $thumbnail ) !== false ) {            return $thumbnail;        }    }    return false;}function sanitize_language( $lang_code ){    $allow_languages = array('en','he','ru');    $lang_code = sanitize_text_field( $lang_code );    if( in_array( $lang_code , $allow_languages ) )        $return = $lang_code;    else        $return = 'en';    return $return;}function wpl_get_core_lang(){    if( !get_option('wplorem_nn_core_language') )        $lang = 'en';    else        $lang = sanitize_language( get_option('wplorem_nn_core_language') );    return $lang;}function wp_lorem_nn_get_insert_title(){    $title['en'] = 'Lorem Title';    $title['he'] = 'כותרת לורם';    $title['ru'] = 'Lorem заглавие';    return $title[wpl_get_core_lang()];}function wp_lorem_nn_get_insert_content(){    $content['en'] = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed eleifend magna id aliquet aliquam. Fusce tincidunt et nisi placerat sagittis. Morbi pulvinar justo ultrices nisi feugiat, fringilla feugiat enim commodo. Nulla vitae mauris ligula. Nam posuere consectetur semper. Sed ultrices imperdiet ante at dignissim. Quisque vehicula, arcu vitae vehicula viverra, dolor leo elementum urna, quis bibendum nibh velit suscipit dolor.';    $content['he'] = 'לורם איפסום דולור סיט אמט, קונסקטורר אדיפיסינג אלית להאמית קרהשק סכעיט דז מא, מנכם למטכין נשואי מנורך. סחטיר בלובק. תצטנפל בלינדו למרקל אס לכימפו, דול, צוט ומעיוט - לפתיעם ברשג - ולתיעם גדדיש. קוויז דומור ליאמום בלינך רוגצה. לפמעט מוסן מנת. קולורס מונפרד אדנדום סילקוף, מרגשי ומרגשח. עמחליף להאמית קרהשק סכעיט דז מא, מנכם למטכין נשואי מנורךגולר מונפרר סוברט לורם שבצק יהול, לכנוץ בעריר גק ליץ, ושבעגט. קולהע צופעט למרקוח איבן איף, ברומץ כלרשט מיחוצים. קלאצי הועניב היושבב שערש שמחויט - שלושע ותלברו חשלו שעותלשך וחאית נובש ערששף. זותה מנק הבקיץ אפאח דלאמת יבש, כאנה ניצאחו נמרגי שהכים תוק, הדש שנרא התידם הכייר וק. נולום ארווס סאפיאן - פוסיליס קוויס, אקווזמן קוואזי במר מודוף. אודיפו בלאסטיק מונופץ קליר, בנפת נפקט למסון בלרק - וענוף נולום ארווס סאפיאן - פוסיליס קוויס, אקווזמן מוסן מנת. להאמית קרהשק סכעיט דז מא, מנכם למטכין נשואי מנורך. קונסקטורר אדיפיסינג אלית. סת אלמנקום ניסי נון ניבאה. דס איאקוליס וולופטה דיאם. וסטיבולום אט דולור, קראס אגת לקטוס וואל אאוגו וסטיבולום סוליסי טידום בעליק. קונדימנטום קורוס בליקרה, נונסטי קלובר בריקנה סטום, לפריקך תצטריק לרטי.  קולהע צופעט למרקוח איבן איף, ברומץ כלרשט מיחוצים. קלאצי סחטיר בלובק. תצטנפל בלינדו למרקל אס לכימפו, דול, צוט ומעיוט - לפתיעם ברשג - ולתיעם גדדיש. קוויז דומור ליאמום בלינך רוגצה. לפמעט  סחטיר בלובק. תצטנפל בלינדו למרקל אס לכימפו, דול, צוט ומעיוט - לפתיעם ברשג - ולתיעם גדדיש. קוויז דומור ליאמום בלינך רוגצה. לפמעט מוסן מנת. צש בליא, מנסוטו צמלח לביקו ננבי, צמוקו בלוקריה שיצמה ברורק. לורם איפסום דולור סיט אמט, קונסקטורר אדיפיסינג אלית. סת אלמנקום ניסי נון ניבאה. דס איאקוליס וולופטה דיאם. וסטיבולום אט דולור, קראס אגת לקטוס וואל אאוגו וסטיבולום סוליסי טידום בעליק. קונדימנטום קורוס בליקרה, נונסטי קלובר בריקנה סטום, לפריקך תצטריק לרטי.  הועניב היושבב שערש שמחויט - שלושע ותלברו חשלו שעותלשך וחאית נובש ערששף. זותה מנק הבקיץ אפאח דלאמת יבש, כאנה ניצאחו נמרגי שהכים תוק, הדש שנרא התידם הכייר וק.';    $content['ru'] = 'Зыд ку выро нощтыр ёнвидюнт, эжт омнеж мэдиокретатым эа. Экз жят клита ридэнж, прё ед волумюч дэниквюы оффэндйт, доктюж вольуптатибюж про ут. Дйкит дёжкэрэ партйэндо пэр ед, хомэро квюоджё ат ыюм. Минемум янвыняры аккоммодары эю шэа, эи лебыр конжтетуто ныкэжчятатябюз вим, ед еюж зюаз фэугяат оффекйяж. Зыд выльёт омнэжквюы аккюжамюз ат. Экз амэт ридэнж ёнвидюнт векж, пожтэа оффэндйт эа ыюм. Анкилльаы дёжжэнтиюнт квуй йн, дуо лудуз тамквюам пэрчёус йн. Вяш ут витаэ граэко, кюм ат хомэро пропрёаы, ючю хабымуч эюрйпйдяч ныглэгэнтур эа. Ныморэ молыжтйаы инкедыринт мэль ад, эзшэ вокынт аюдирэ ючю но, ты ыюм альяквюам ёнэрмйщ партйэндо. Дэбетиз праэчынт форынчйбюж пэр эю, экз диам вёвындо вяш. Адхюк вокынт еюж йн, пюрто аккузата глориатюр мэя ад. Нэ льаборэ дэтракто пэр, векж шапэрэт долорюм ат. Дуо но аппарэат азжюывырит рэпудёандаэ, эжт ад тальэ тантаз. Мэльиорэ дыфинитеоным ат еюж. Ан незл вольуптатибюж нык, ипзум каючаэ пэркёпитюр ан про. Лаудым пэркйпет зыд но, ад вэл пыртенакж жямиляквюы зюжкепиантюр. Вяш ан йужто элыктрам. Мыа ыт лудуз аккюжамюз интылльэгэбат, еюж эю дылыктуч контынтёонэж. Квюод дыкоры мэль нэ, агам квюот ед векж, ыам эа долорэм алёэнюм пропрёаы. Эю эжт пожжёт альяквюам орнатюс. Мэль пожжёт волуптюа молыжтйаы эа. Жят нонумй ножтрюд ывыртятюр ад, хаж дэльэнйт льюкяльиюч но. Татион квуёдам эффикеэнди эож ан, орнатюс ёнвидюнт опортэры прё нэ. Пырфэкто номинатй пэр эи. Мыа аппэтырэ тэмпорибуз но, еюж ут пропрёаы нолюёжжэ, видырэр мныжаркхюм дёзсэнтёаш мыа ут. Эож ку нибх ёужто позтюлант, эжт мацим мюнырэ ут, йн пэр ёудико жямиляквюы. Лаудым аккюжамюз эю вяш, хёнк жкрипта ыльигэнди квюо эю. Ед фюгит зкрипторэм мэя, эи квюач фачтидёе дыфяниэбаж шэа. Амэт кибо но ючю, ку эуежмод альяквюам альбюкиюс ыам. Эзшэ ыпикурэи щуавятатэ эю еюж, хаж эю минемум ножтрюм кончэктэтюыр. Мэя эа жкрипта конвынёры. Ут прё льаборэ вэрыар квюальизквюэ, квуым фэюгаят аргюмынтум ыам ты. Йн алиё щольыат кюм. Долорюм губэргрэн эи эжт. Нам ыт нюлльам ыпикурэи. Ыам татион фабыллас абхоррэант ан. Йн мэль адхюк жанктюч интыллыгам, ючю квюаыквуэ копиожаы ад, нэ квуй харюм партым альяквюам. Лорэм лыгимуз хёз ан. Этёам фюйзчыт нэ жят. Ыюм убяквюэ ыкжпэтэндяз но, про ат кэтэро продыжщэт. Емпыдит рыфэррэнтур ад мыа. Ад про номинави чэнзэрет, ат заэпы нощтыр компльыктётюр квюо. Ад нибх зэнтынтиаэ прё, эож йн хомэро юлламкорпэр. Квуй эи кашы трактатоз, экз вёжи чонэт хёз. Квюод пэркёпитюр дёзсэнтёаш ыт ючю, нэ апэриам дёжкэрэ ылоквюэнтиам прё. Ютроквюы конкльюдатюрквюэ ючю но.';    return $content[wpl_get_core_lang()];}