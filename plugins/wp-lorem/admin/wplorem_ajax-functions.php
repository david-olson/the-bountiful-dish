<?php defined( 'ABSPATH' ) or die( 'No script kiddies please!' );add_action( 'wp_ajax_wpl_init_createLoremPosts_ajax', 'wpl_init_createLoremPosts_ajax' );/** * wpl_init_createLoremPosts_ajax() * @return Errors And Messages **/function wpl_init_createLoremPosts_ajax(){     $result = $ajaxData = $postData = array();     if( is_user_logged_in() && is_admin() && check_ajax_referer( 'wp_nonce-new_posts', 'security' ) ){         $ajaxData = $_POST;         $ajaxData['number'] = $ajaxData['wp-lorem_settings_number'] ? $ajaxData['wp-lorem_settings_number'] : 10;         foreach( $ajaxData as $dataKey => $dataValue){             if( preg_match( "/wp-lorem_postType_(.*)/" , $dataKey ) )                $postData['post_type'][] = str_replace( 'wp-lorem_postType_' , '' , sanitize_text_field( $dataKey ) );             if( preg_match( "/lorem_settings_(.*)/" , $dataKey ) )                $postData['settings'][ str_replace( 'wp-lorem_settings_' , '' , sanitize_text_field( $dataKey ) ) ] = $dataValue;        }        if( !empty( $postData['post_type'] ) ){            wp_lorem_nn_insertNewPosts( $postData['post_type'] , $postData['settings'] , $ajaxData['number'] );            $result['success'] = true;            $result['msg']     = '<div class="updated notice"><p>'.__('Check your selected post types - New posts added !' , 'wp-lorem').'</p></div>';        } else{            $result['error'] = true;            $result['msg']   = '<div class="error notice"><p>'.__('You forgot to select where you want to create the new posts' , 'wp-lorem').'</p></div>';        }    } else{        $result['error'] = true;        $result['msg']   = '<div class="error notice"><p>'.__('Error : Something goes wrong' , 'wp-lorem').'</p></div>';    }    echo json_encode( $result );    die();}add_action( 'wp_ajax_wpl_init_removeLoremPosts_ajax', 'wpl_init_removeLoremPosts_ajax' );/** * wpl_init_removeLoremPosts_ajax() * @return Errors And Messages **/ function wpl_init_removeLoremPosts_ajax(){     $result   = $ajaxData = array();     $ajaxData = $_POST;     if( is_user_logged_in() && is_admin() && check_ajax_referer( 'security-remove_posts', 'security' ) ){         $args = array(             'posts_per_page' => -1,             'post_type'      => wp_lorem_nn_getPostType(),             'post_status'    => 'lorem_post'         );         $posts_array = get_posts( $args );         if( !empty( $posts_array ) && !is_wp_error( $posts_array ) ){            foreach( $posts_array as $postToDelete ){                 if( isset( $ajaxData['thumbnail'] ) && $ajaxData['thumbnail'] == 'true' )                    wp_delete_attachment( get_post_thumbnail_id( $postToDelete->ID ) );                wp_delete_post( $postToDelete->ID );            }            $result['success'] = true;            $result['msg']     = '<div class="updated notice"><p>'.__('All <strong>Lorem Posts</strong> Deleted Succesfuly !' , 'wp-lorem').'</p></div>';        } else{            $result['error'] = true;            $result['msg']   = '<div class="error notice"><p>'.__('You dont have any <strong>Lorem Posts</strong> to delete' , 'wp-lorem').'</p></div>';        }    } else{        $result['error'] = true;        $result['msg']   = '<div class="error notice"><p>'.__('Error : Something goes wrong' , 'wp-lorem').'</p></div>';    }    echo json_encode( $result );    die();}add_action( 'wp_ajax_wpl_init_changeCoreLanguage_ajax', 'wpl_init_changeCoreLanguage_ajax' );/** * wpl_init_changeCoreLanguage_ajax() * @return Errors And Messages **/function wpl_init_changeCoreLanguage_ajax(){     $result   = $ajaxData = array();     $ajaxData = $_POST;     if( is_user_logged_in() && is_admin() ){         if( update_option( 'wplorem_nn_core_language' , sanitize_language( $_POST['language'] ) ) ){            $result['success'] = true;            $result['msg']     = '<div class="updated notice"><p>'.__('The language succesfuly changed !' , 'wp-lorem').'</p></div>';        } else{            $result['error'] = true;            $result['msg']   = '<div class="error notice"><p>'.__('Error : Something goes wrong' , 'wp-lorem').'</p></div>';        }    } else{        $result['error'] = true;        $result['msg']   = '<div class="error notice"><p>'.__('Error : Something goes wrong' , 'wp-lorem').'</p></div>';    }    echo json_encode( $result );    die();}